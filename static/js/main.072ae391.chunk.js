(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{50:function(e,a,t){},51:function(e,a,t){},70:function(e,a,t){"use strict";t.r(a);var r,s=t(1),i=t.n(s),c=t(20),n=t.n(c),l="/",o="/login",d="/favorites",j="/offer/:id",u="/not-found",m="AUTH",_="NO_AUTH",b="UNKNOWN",p="/hotels/",h="/nearby",O="/favorite/",f="/comments/",v="/login",x="/logout",g="en-US",N="numeric",y="short",w={id:null,name:"",token:"",isPro:!1,email:"",avatarUrl:""},S="Price: low to high",C="Price: high to low",k="Top rated first",R=[{type:"Popular"},{type:"Price: low to high"},{type:"Price: high to low"},{type:"Top rated first"}],q=[{name:"Paris",location:{lat:48.85661,lng:2.351499,zoom:13}},{name:"Cologne",location:{lat:50.938361,lng:6.959974,zoom:13}},{name:"Brussels",location:{lat:50.846557,lng:4.351697,zoom:13}},{name:"Amsterdam",location:{lat:52.37454,lng:4.897976,zoom:13}},{name:"Hamburg",location:{lat:53.550341,lng:10.000654,zoom:13}},{name:"Dusseldorf",location:{lat:51.225402,lng:6.776314,zoom:13}}],E={normal:{type:"place-card",width:18,height:19},large:{type:"property",width:31,height:33}},T=t(3),F=t(5),L="CITY_CHANGE",M="SORT_CHANGE",P="SORT_MENU_OPEN",D="ACTIVE_OFFER",z="SELECT_OFFER",A="data/loadOffers",I="data/loadReviews",U="user/requiredAuthorization",H="LOGIN",G="user/logout",B="REDIRECT_TO_ROUTE",W="COMMENT_SEND",J="FAVORITE_STATUS_CHANGE",V="SET_COMMENT_SEND_SUCCESS",Y="SET_COMMENT_SEND_ERROR",K="COMMENT_SENDING",$=Object(F.b)(L,(function(e){return{payload:e}})),Q=Object(F.b)(M,(function(e){return{payload:e}})),X=Object(F.b)(P,(function(e){return{payload:e}})),Z=Object(F.b)(D,(function(e){return{payload:Number(e)}})),ee=Object(F.b)(z,(function(e){return{payload:e}})),ae=Object(F.b)(A,(function(e){return{payload:e}})),te=Object(F.b)(I,(function(e){return{payload:e}})),re=Object(F.b)(U,(function(e){return{payload:e}})),se=Object(F.b)(H,(function(e){return{payload:e}})),ie=Object(F.b)(G),ce=Object(F.b)(B,(function(e){return{payload:e}})),ne=Object(F.b)(W,(function(e){return{payload:e}})),le=Object(F.b)(J,(function(e){return{payload:e}})),oe=Object(F.b)(V,(function(e){return{payload:e}})),de=Object(F.b)(Y,(function(e){return{payload:e}})),je=Object(F.b)(K,(function(e){return{payload:e}})),ue=function(e){var a=Object.assign({},e,{id:e.id,title:e.title,rating:me(e.rating),price:e.price,type:e.type,isFavorite:e.is_favorite,isPremium:e.is_premium,previewImage:e.preview_image,bedrooms:e.bedrooms,maxAdults:e.max_adults,description:e.description,goods:e.goods,city:{name:e.city.name,location:{lat:e.city.location.latitude,lng:e.city.location.longitude,zoom:e.city.location.zoom}},host:{avatarUrl:e.host.avatar_url,id:e.host.id,isPro:e.host.is_pro,name:e.host.name},images:e.images,location:{lat:e.location.latitude,lng:e.location.longitude,zoom:e.location.zoom}});return delete a.is_favorite,delete a.is_premium,delete a.preview_image,delete a.max_adults,a},me=function(e){var a=Math.round(e);return a>5?5:a},_e=function(e){var a=Object.assign({},e,{avatarUrl:e.avatar_url,email:e.email,id:e.id,isPro:e.is_pro,name:e.name,token:e.token});return delete a.avatar_url,delete a.is_pro,a},be=function(e){return function(a,t,r){return r.get(f+e).then((function(e){var t=e.data;return a(te(t.map((function(e){return function(e){return Object.assign({},e,{id:e.id,date:e.date,comment:e.comment,rating:e.rating,user:{avatarUrl:e.user.avatar_url,id:e.user.id,isPro:e.user.is_pro,name:e.user.name}})}(e)}))))}))}},pe=t(14),he=t(11),Oe={sortType:"Popular",sortMenuIsOpen:!1},fe=Object(F.c)(Oe,(function(e){e.addCase(Q,(function(e,a){e.sortType=a.payload})).addCase(X,(function(e,a){e.sortMenuIsOpen=a.payload}))})),ve={isDataLoaded:!1,isDataOfferLoaded:!1,offers:[],reviews:[],selectedOffer:{},activeOffer:null,city:{name:"Paris",location:{lat:48.86471,lng:2.3,zoom:12}},sortMenuIsOpen:!1},xe=Object(F.c)(ve,(function(e){e.addCase(ae,(function(e,a){e.offers=a.payload,e.isDataLoaded=!0})).addCase(ee,(function(e,a){e.selectedOffer=a.payload,e.isDataOfferLoaded=!0})).addCase(te,(function(e,a){e.reviews=a.payload,e.isDataLoaded=!0})).addCase(Z,(function(e,a){e.activeOffer=a.payload})).addCase(le,(function(e,a){var t=e.offers.find((function(e){return e.id===a.payload}));t&&(t.isFavorite=!t.isFavorite),a.payload===e.selectedOffer.id&&(e.selectedOffer.isFavorite=!e.selectedOffer.isFavorite)})).addCase($,(function(e,a){e.city=a.payload,e.sortMenuIsOpen=!1}))})),ge={authorizationStatus:b,user:w},Ne=Object(F.c)(ge,(function(e){e.addCase(re,(function(e,a){e.authorizationStatus=a.payload})).addCase(se,(function(e,a){e.user=a.payload})).addCase(ie,(function(e){e.authorizationStatus=_,e.user=w}))})),ye=Object(F.c)({comment:{comment:"",rating:null},isCommentSendSuccess:!1,isCommentSendError:!1,isCommentSending:!1},(function(e){e.addCase(ne,(function(e,a){e.comment=a.payload})).addCase(oe,(function(e,a){e.isCommentSendSuccess=a.payload})).addCase(de,(function(e,a){e.isCommentSendError=a.payload})).addCase(je,(function(e,a){e.isCommentSending=a.payload}))})),we="LOADED_DATA",Se="SENT_DATA",Ce="USER",ke="SORT",Re=Object(he.c)((r={},Object(pe.a)(r,we,xe),Object(pe.a)(r,Se,ye),Object(pe.a)(r,Ce,Ne),Object(pe.a)(r,ke,fe),r)),qe=function(e){return e[Ce].authorizationStatus},Ee=function(e){return e[Ce].user},Te=t(0);var Fe=function(e){var a=e.isFavorite,t=e.id,r=e.buttonFavoriteStyle,s=Object(T.b)(),i=Object(T.c)(qe),c="".concat(r.type,"__bookmark-button button"),n="".concat(r.type,"__bookmark-button button ").concat(r.type,"__bookmark-button--active");return Object(Te.jsxs)("button",{onClick:function(e){e.preventDefault(),s(function(e,a){return function(t,r,s){return s.post("".concat(O+e,"/").concat(a?0:1)).then((function(){return t(le(e))})).catch((function(){return t(ce(o))}))}}(t,a))},className:a&&i===m?n:c,type:"button",children:[Object(Te.jsx)("svg",{className:"".concat(r.type,"__bookmark-icon"),width:r.width,height:r.height,children:Object(Te.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Te.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})};var Le=function(e){var a=e.rating,t="".concat(20*a,"%");return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("span",{style:{width:t}}),Object(Te.jsx)("span",{className:"visually-hidden",children:"Rating"})]})},Me=t(2),Pe=t.n(Me),De=(Pe.a.shape({id:Pe.a.number.isRequired,title:Pe.a.string.isRequired,rating:Pe.a.number.isRequired,price:Pe.a.number.isRequired,type:Pe.a.string.isRequired,isFavorite:Pe.a.bool.isRequired,isPremium:Pe.a.bool.isRequired,previewImage:Pe.a.string.isRequired,bedrooms:Pe.a.number.isRequired,maxAdults:Pe.a.number.isRequired,description:Pe.a.string.isRequired,goods:Pe.a.arrayOf(Pe.a.string.isRequired).isRequired,city:Pe.a.shape({name:Pe.a.string.isRequired,location:Pe.a.shape({lat:Pe.a.number.isRequired,lng:Pe.a.number.isRequired,zoom:Pe.a.number.isRequired}).isRequired}).isRequired,host:Pe.a.shape({avatarUrl:Pe.a.string.isRequired,id:Pe.a.number.isRequired,isPro:Pe.a.bool.isRequired,name:Pe.a.string.isRequired}).isRequired,images:Pe.a.arrayOf(Pe.a.string.isRequired).isRequired,location:Pe.a.shape({lat:Pe.a.number.isRequired,lng:Pe.a.number.isRequired,zoom:Pe.a.number.isRequired}).isRequired}),t(7)),ze=t(6);var Ae=function(e){var a=e.id,t=e.title;return Object(Te.jsx)("h2",{className:"place-card__name",children:Object(Te.jsx)(De.b,{to:{pathname:Object(ze.f)(j,{id:a})},children:t})})};function Ie(e){var a=e.onOfferMouseEnter,t=e.onOfferMouseLeave,r=e.offer,s=r.title,i=r.price,c=r.type,n=r.rating,l=r.isFavorite,o=r.isPremium,d=r.id,j=r.previewImage;return Object(Te.jsxs)("article",{className:"cities__place-card place-card",onMouseEnter:function(){a(d)},onMouseLeave:t,children:[o?Object(Te.jsx)("div",{className:"place-card__mark",children:Object(Te.jsx)("span",{children:"Premium"})}):"",Object(Te.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(Te.jsx)("a",{href:"/#",children:Object(Te.jsx)("img",{className:"place-card__image",src:j,width:"260",height:"200",alt:"Place image"})})}),Object(Te.jsxs)("div",{className:"place-card__info",children:[Object(Te.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Te.jsxs)("div",{className:"place-card__price",children:[Object(Te.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",i]}),Object(Te.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Te.jsx)(Fe,{isFavorite:l,id:d,buttonFavoriteStyle:E.normal})]}),Object(Te.jsx)("div",{className:"place-card__rating rating",children:Object(Te.jsx)("div",{className:"place-card__stars rating__stars",children:Object(Te.jsx)(Le,{rating:n})})}),Object(Te.jsx)(Ae,{id:d,title:s}),Object(Te.jsx)("p",{className:"place-card__type",children:c})]})]})}var Ue=Object(s.memo)(Ie),He=t(18),Ge=t(39);t(50);var Be=function(){return Object(Te.jsx)("div",{className:"loader",children:"Loading..."})},We=["isDataLoaded"],Je=function(e){return function(a){var t=a.isDataLoaded,r=Object(Ge.a)(a,We);return t&&Object(Te.jsx)(e,Object(He.a)({},r))||Object(Te.jsx)(Be,{})}};var Ve=Je((function(e){var a=e.offers,t=e.onOfferMouseEnter,r=e.onOfferMouseLeave;return Object(Te.jsx)("div",{className:"cities__places-list places__list tabs__content",children:a.map((function(e){return Object(Te.jsx)(Ue,{offer:e,onOfferMouseEnter:t,onOfferMouseLeave:r},e.id)}))})})),Ye=t(16),Ke=t.n(Ye),$e=(t(29),Pe.a.shape({name:Pe.a.string.isRequired,location:Pe.a.shape({lat:Pe.a.number.isRequired,lng:Pe.a.number.isRequired,zoom:Pe.a.number.isRequired})}),t(24));var Qe=function(e,a){var t=Object(s.useState)(null),r=Object($e.a)(t,2),i=r[0],c=r[1];return Object(s.useEffect)((function(){if(null!==e.current&&null===i){var t=Ke.a.map(e.current,{center:{lat:a.location.lat,lng:a.location.lng},zoom:a.location.zoom});Ke.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(t),c(t)}}),[e,i,a]),i};var Xe=function(e){var a=e.city,t=e.offers,r=e.activeOffer,i=Object(s.useRef)(null),c=Qe(i,a),n=Ke.a.icon({iconUrl:"img/pin.svg",iconSize:[27,39],iconAnchor:[13,39]}),l=Ke.a.icon({iconUrl:"img/pin-active.svg",iconSize:[27,39],iconAnchor:[13,39]});return Object(s.useEffect)((function(){var e=Ke.a.layerGroup();return c&&(e.addTo(c),t.forEach((function(a){var t=a.location.lat,s=a.location.lng;Ke.a.marker({lat:t,lng:s},{icon:r===a.id?l:n}).addTo(e)})),c.flyTo([a.location.lat,a.location.lng],a.location.zoom)),function(){e.clearLayers()}}),[c,a,t,r]),Object(Te.jsx)("div",{ref:i,id:"map",style:{height:"100%"}})};var Ze=function(e){var a=e.city,t=e.activeCity,r=e.cityChange;return Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{onClick:function(e){e.preventDefault(),r(a)},className:a.name.toLowerCase()===t.name.toLowerCase()?"locations__item-link tabs__item tabs__item--active":"locations__item-link tabs__item",href:"#",children:Object(Te.jsx)("span",{children:a.name})})})};var ea=function(e){var a=e.cityList,t=e.activeCity,r=e.cityChange;return Object(Te.jsx)("ul",{className:"locations__list tabs__list",children:a.map((function(e){return Object(Te.jsx)(Ze,{cityChange:r,activeCity:t,city:e},e.name)}))})};Pe.a.shape({type:Pe.a.string.isRequired});var aa=function(e){var a=e.sort,t=e.handlerSortTypeChange,r=e.sortType,s=e.handlerSortMenuOpen;return Object(Te.jsx)("li",{onClick:function(){t(a.type),s(!1)},className:r===a.type?"places__option places__option--active":"places__option",tabIndex:"0",children:a.type})};var ta=function(e){var a=e.sortMenuIsOpen,t=e.sortType,r=e.handlerSortMenuOpen,s=e.handlerSortTypeChange;return Object(Te.jsx)("ul",{className:a?"places__options places__options--custom places__options--opened":"places__options places__options--custom",children:R.map((function(e){return Object(Te.jsx)(aa,{sortType:t,handlerSortTypeChange:s,handlerSortMenuOpen:r,sort:e},e.type)}))})},ra=function(e){return e[ke].sortType},sa=function(e){return e[ke].sortMenuIsOpen};var ia=function(){var e=Object(T.c)(ra),a=Object(T.c)(sa),t=Object(T.b)(),r=function(e){t(X(e))};return Object(Te.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(Te.jsx)("span",{className:"places__sorting-caption",children:"Sort by"}),Object(Te.jsxs)("span",{onClick:function(e){e.preventDefault(),r(!a)},className:"places__sorting-type",tabIndex:"0",children:["\xa0",e,Object(Te.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(Te.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(Te.jsx)(ta,{sortType:e,sortMenuIsOpen:a,handlerSortTypeChange:function(e){t(Q(e))},handlerSortMenuOpen:r})]})};var ca=function(){return Object(Te.jsx)(De.b,{className:"header__logo-link header__logo-link--active",to:"/",children:Object(Te.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})};var na=function(){var e=Object(T.c)(qe),a=Object(T.c)(Ee),t=Object(T.b)();return Object(Te.jsx)("header",{className:"header",children:Object(Te.jsx)("div",{className:"container",children:Object(Te.jsxs)("div",{className:"header__wrapper",children:[Object(Te.jsx)("div",{className:"header__left",children:Object(Te.jsx)(ca,{})}),Object(Te.jsxs)("nav",{className:"header__nav",children:[e===m?Object(Te.jsxs)("ul",{className:"header__nav-list",children:[Object(Te.jsx)("li",{className:"header__nav-item user",children:Object(Te.jsxs)(De.b,{to:d,className:"header__nav-link header__nav-link--profile",children:[Object(Te.jsx)("div",{style:{backgroundImage:"url(".concat(a.avatarUrl,")")},className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Te.jsx)("span",{className:"header__user-name user__name",children:a.email})]})}),Object(Te.jsx)("li",{className:"header__nav-item",children:Object(Te.jsx)("a",{onClick:function(e){e.preventDefault(),t((function(e,a,t){return t.delete(x).then((function(){return localStorage.removeItem("token")})).then((function(){return e(ie())}))}))},className:"header__nav-link",href:"/#",children:Object(Te.jsx)("span",{className:"header__signout",children:"Sign out"})})})]}):"",e===_?Object(Te.jsx)("ul",{className:"header__nav-list",children:Object(Te.jsx)("li",{className:"header__nav-item user",children:Object(Te.jsxs)(De.b,{to:o,className:"header__nav-link header__nav-link--profile",children:[Object(Te.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Te.jsx)("span",{className:"header__login",children:"Sign in"})]})})}):""]})]})})})},la=t(15),oa=function(e){return e[we].isDataLoaded},da=function(e){return e[we].isDataOfferLoaded},ja=function(e){return e[we].offers},ua=function(e){return e[we].reviews},ma=function(e){return e[we].selectedOffer},_a=function(e){return e[we].activeOffer},ba=function(e){return e[we].city},pa=Object(la.a)([ja],(function(e){return e.filter((function(e){return e.isFavorite}))})),ha=Object(la.a)([ba,ja],(function(e,a){return a.filter((function(a){return e.name.toLowerCase()===a.city.name.toLowerCase()}))})),Oa=Object(la.a)([ra,ha],(function(e,a){switch(e){case C:return a.slice().sort((function(e,a){return a.price-e.price}));case S:return a.slice().sort((function(e,a){return e.price-a.price}));case k:return a.slice().sort((function(e,a){return a.rating-e.rating}));default:return a}}));var fa=function(){var e=Object(T.c)(ba);return Object(Te.jsx)("div",{className:"cities",children:Object(Te.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(Te.jsx)("section",{className:"cities__no-places",children:Object(Te.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(Te.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(Te.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in\xa0",e.name]})]})}),Object(Te.jsx)("div",{className:"cities__right-section"})]})})};var va=function(e){var a=e.cityList,t=Object(T.c)(Oa),r=Object(T.c)(ba),i=Object(T.c)(oa),c=Object(T.c)(_a),n=Object(T.b)(),l=function(e){n(Z(e))},o=function(){n((function(e,a,t){return t.get(p).then((function(a){var t=a.data;return e(ae(t.map((function(e){return ue(e)}))))})).catch((function(){return e(ce(u))}))}))};Object(s.useEffect)((function(){o()}),[i]);var d=Object(s.useCallback)((function(e){return l(e)}),[]),j=Object(s.useCallback)((function(){return l(null)}),[]);return Object(Te.jsxs)("div",{className:"page page--gray page--main",children:[Object(Te.jsx)(na,{}),Object(Te.jsxs)("main",{className:"page__main page__main--index",children:[Object(Te.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(Te.jsx)("div",{className:"tabs",children:Object(Te.jsx)("section",{className:"locations container",children:Object(Te.jsx)(ea,{activeCity:r,cityList:a,cityChange:function(e){n($(e))}})})}),0===t.length&&!0===i?Object(Te.jsx)(fa,{}):Object(Te.jsx)("div",{className:"cities",children:Object(Te.jsxs)("div",{className:"cities__places-container container",children:[Object(Te.jsxs)("section",{className:"cities__places places",children:[Object(Te.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(Te.jsxs)("b",{className:"places__found",children:[t.length," places to stay in Amsterdam"]}),Object(Te.jsx)(ia,{}),Object(Te.jsx)("div",{className:"cities__places-list places__list tabs__content",children:Object(Te.jsx)(Ve,{isDataLoaded:i,offers:t,onOfferMouseEnter:d,onOfferMouseLeave:j})})]}),Object(Te.jsx)("div",{className:"cities__right-section",children:Object(Te.jsx)("section",{className:"cities__map map",children:Object(Te.jsx)(Xe,{city:r,offers:t,activeOffer:c})})})]})})]})]})},xa=t(23);var ga=function(e){var a=e.offer,t=a.title,r=a.price,s=a.rating,i=a.type,c=a.previewImage,n=a.id,l=a.isFavorite;return Object(Te.jsxs)("article",{className:"favorites__card place-card",children:[Object(Te.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(Te.jsx)("a",{href:"/#",children:Object(Te.jsx)("img",{className:"place-card__image",src:c,width:"150",height:"110",alt:"Place image"})})}),Object(Te.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(Te.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Te.jsxs)("div",{className:"place-card__price",children:[Object(Te.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",r]}),Object(Te.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Te.jsx)(Fe,{isFavorite:l,id:n,buttonFavoriteStyle:E.normal})]}),Object(Te.jsx)("div",{className:"place-card__rating rating",children:Object(Te.jsx)(Le,{rating:s})}),Object(Te.jsx)("h2",{className:"place-card__name",children:Object(Te.jsx)(De.b,{to:j,children:t})}),Object(Te.jsx)("p",{className:"place-card__type",children:i})]})]})};var Na=function(e){var a=e.offers;return Object(Te.jsx)("div",{className:"favorites__places",children:a.map((function(e){return Object(Te.jsx)(ga,{offer:e},e.id)}))})};var ya=function(e){var a=e.city,t=e.offers;return Object(Te.jsxs)("li",{className:"favorites__locations-items",children:[Object(Te.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(Te.jsx)("div",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link",href:"/#",children:Object(Te.jsx)("span",{children:a})})})}),Object(Te.jsx)(Na,{offers:t})]})},wa=function(e,a){return a.filter((function(a){return e.toLowerCase()===a.city.name.toLowerCase()}))};var Sa=function(e){var a=e.offers,t=Object(xa.a)(new Set(a.map((function(e){return e.city.name}))));return Object(Te.jsx)("ul",{className:"favorites__list",children:t.map((function(e){return Object(Te.jsx)(ya,{offers:wa(e,a),city:e},e)}))})};var Ca=function(){return Object(Te.jsxs)("div",{className:"page page--favorites-empty",children:[Object(Te.jsx)(na,{}),Object(Te.jsx)("main",{className:"page__main page__main--favorites page__main--favorites-empty",children:Object(Te.jsx)("div",{className:"page__favorites-container container",children:Object(Te.jsxs)("section",{className:"favorites favorites--empty",children:[Object(Te.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(Te.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(Te.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(Te.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})}),Object(Te.jsx)("footer",{className:"footer",children:Object(Te.jsx)(De.b,{className:"footer__logo-link",to:l,children:Object(Te.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})]})};var ka=function(){var e=Object(T.c)(oa),a=Object(T.c)(pa),t=Object(T.b)(),r=function(){t((function(e,a,t){return t.get(O).then((function(a){var t=a.data;return e(ae(t.map((function(e){return ue(e)}))))})).catch((function(){return e(ce(u))}))}))};return Object(s.useEffect)((function(){r()}),[e]),0===a.length?Object(Te.jsx)(Ca,{}):Object(Te.jsxs)("div",{className:"page",children:[Object(Te.jsx)(na,{}),Object(Te.jsx)("main",{className:"page__main page__main--favorites",children:Object(Te.jsx)("div",{className:"page__favorites-container container",children:Object(Te.jsxs)("section",{className:"favorites",children:[Object(Te.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(Te.jsx)(Sa,{offers:a})]})})}),Object(Te.jsx)("footer",{className:"footer container",children:Object(Te.jsx)("a",{className:"footer__logo-link",href:"main.html",children:Object(Te.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})]})};var Ra=function(){var e=Object(s.useRef)(),a=Object(s.useRef)(),t=Object(T.b)(),r=function(e){t(function(e){var a=e.login,t=e.password;return function(e,r,s){return s.post(v,{email:a,password:t}).then((function(a){var t=a.data;localStorage.setItem("token",t.token),e(se(_e(t))),e(re(m))}))}}(e))};return Object(Te.jsxs)("div",{className:"page page--gray page--login",children:[Object(Te.jsx)("header",{className:"header",children:Object(Te.jsx)("div",{className:"container",children:Object(Te.jsxs)("div",{className:"header__wrapper",children:[Object(Te.jsx)("div",{className:"header__left",children:Object(Te.jsx)(ca,{})}),Object(Te.jsx)("nav",{className:"header__nav",children:Object(Te.jsx)("ul",{className:"header__nav-list",children:Object(Te.jsx)("li",{className:"header__nav-item user",children:Object(Te.jsxs)("a",{className:"header__nav-link header__nav-link--profile",href:"/#",children:[Object(Te.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Te.jsx)("span",{className:"header__login",children:"Sign in"})]})})})})]})})}),Object(Te.jsx)("main",{className:"page__main page__main--login",children:Object(Te.jsxs)("div",{className:"page__login-container container",children:[Object(Te.jsxs)("section",{className:"login",children:[Object(Te.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(Te.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r({login:e.current.value,password:a.current.value})},className:"login__form form",action:"#",method:"post",children:[Object(Te.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Te.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(Te.jsx)("input",{ref:e,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(Te.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Te.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(Te.jsx)("input",{ref:a,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:"",pattern:"^[^\\s()-]*$"})]}),Object(Te.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(Te.jsx)("section",{className:"locations locations--login locations--current",children:Object(Te.jsx)("div",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link",href:"/#",children:Object(Te.jsx)("span",{children:"Amsterdam"})})})})]})})]})};var qa=function(e){var a=e.offer,t=a.title,r=a.price,s=a.rating,i=a.isFavorite,c=a.type,n=a.previewImage,l=a.id;return Object(Te.jsxs)("article",{className:"near-places__card place-card",children:[Object(Te.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(Te.jsx)("a",{href:"/#",children:Object(Te.jsx)("img",{className:"place-card__image",src:n,width:"260",height:"200",alt:"Place image"})})}),Object(Te.jsxs)("div",{className:"place-card__info",children:[Object(Te.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Te.jsxs)("div",{className:"place-card__price",children:[Object(Te.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",r]}),Object(Te.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Te.jsx)(Fe,{isFavorite:i,id:l,buttonFavoriteStyle:E.normal})]}),Object(Te.jsx)("div",{className:"place-card__rating rating",children:Object(Te.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(Te.jsx)(Le,{rating:s}),Object(Te.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Te.jsx)(Ae,{id:l,title:t}),Object(Te.jsx)("p",{className:"place-card__type",children:c})]})]})};var Ea=function(e){var a=e.offers;return Object(Te.jsxs)("section",{className:"near-places places",children:[Object(Te.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(Te.jsx)("div",{className:"near-places__list places__list",children:a.map((function(e){return Object(Te.jsx)(qa,{offer:e},e.id)}))})]})};var Ta=function(e){var a=e.image;return Object(Te.jsx)("div",{className:"property__image-wrapper",children:Object(Te.jsx)("img",{className:"property__image",src:a,alt:"Photo studio"})})};var Fa=function(e){var a=e.images;return Object(Te.jsx)("div",{className:"property__gallery",children:a.slice(0,6).map((function(e){return Object(Te.jsx)(Ta,{image:e},e)}))})};Pe.a.shape({id:Pe.a.number.isRequired,date:Pe.a.string.isRequired,comment:Pe.a.string,rating:Pe.a.number.isRequired,user:Pe.a.shape({avatarUrl:Pe.a.string,id:Pe.a.number.isRequired,isPro:Pe.a.bool.isRequired,name:Pe.a.string.isRequired}).isRequired});var La=function(e){var a=e.review,t=a.comment,r=a.user,s=a.rating,i=a.date,c=r.name,n=r.avatarUrl,l=new Date(i).toLocaleDateString(g,{year:N,month:y});return Object(Te.jsxs)("li",{className:"reviews__item",children:[Object(Te.jsxs)("div",{className:"reviews__user user",children:[Object(Te.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(Te.jsx)("img",{className:"reviews__avatar user__avatar",src:n,width:"54",height:"54",alt:"Reviews avatar"})}),Object(Te.jsx)("span",{className:"reviews__user-name",children:c})]}),Object(Te.jsxs)("div",{className:"reviews__info",children:[Object(Te.jsx)("div",{className:"reviews__rating rating",children:Object(Te.jsx)("div",{className:"reviews__stars rating__stars",children:Object(Te.jsx)(Le,{rating:s})})}),Object(Te.jsx)("p",{className:"reviews__text",children:t}),Object(Te.jsx)("time",{className:"reviews__time",dateTime:"2019-04-24",children:l})]})]})};var Ma=function(e){var a=e.reviews,t=a.length;return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(Te.jsx)("span",{className:"reviews__amount",children:t})]}),Object(Te.jsx)("ul",{className:"reviews__list",children:a.slice(0,10).sort((function(e,a){return new Date(a.date)-new Date(e.date)})).map((function(e){return Object(Te.jsx)(La,{review:e},e.id)}))})]})},Pa=function(e){return e[Se].comment},Da=function(e){return e[Se].isCommentSendSuccess},za=function(e){return e[Se].isCommentSendError},Aa=function(e){return e[Se].isCommentSending};t(51);var Ia=function(e){var a=e.id,t=Object(T.c)(Da),r=Object(T.c)(za),i=Object(T.c)(Aa),c=Object(s.useState)({review:"",rating:0}),n=Object($e.a)(c,2),l=n[0],o=n[1],d=Object(T.b)(),j=function(e,a,t){d(function(e,a,t){return function(r,s,i){return r(je(!0)),r(oe(!1)),r(de(!1)),i.post(f+t,{comment:e,rating:a}).then((function(){r(oe(!0)),r(de(!1)),r(je(!1)),be(t)})).catch((function(){r(oe(!1)),r(de(!0)),r(je(!1))}))}}(e,a,t)),d(ne({userComment:e,userRating:a}))},u=Object(s.useRef)();Object(s.useEffect)((function(){u.current.value="",o((function(){return{review:"",rating:0}}))}),[t]);var m=function(e){var a=e.target,t=a.name,r=a.value;o((function(e){return Object(He.a)(Object(He.a)({},e),{},Object(pe.a)({},t,r))}))};return Object(Te.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.target.reset(),j(l.review,l.rating,a)},className:"reviews__form form",action:"#",method:"post",children:[Object(Te.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(Te.jsxs)("div",{onChange:m,className:"reviews__rating-form form__rating",children:[r?Object(Te.jsx)("span",{className:"reviews__error-message",children:"Error message"}):"",Object(Te.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"5",id:"5-stars",type:"radio",required:!0}),Object(Te.jsx)("label",{htmlFor:"5-stars",className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(Te.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Te.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(Te.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"4",id:"4-stars",type:"radio"}),Object(Te.jsx)("label",{htmlFor:"4-stars",className:"reviews__rating-label form__rating-label",title:"good",children:Object(Te.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Te.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(Te.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"3",id:"3-stars",type:"radio"}),Object(Te.jsx)("label",{htmlFor:"3-stars",className:"reviews__rating-label form__rating-label",title:"not bad",children:Object(Te.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Te.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(Te.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"2",id:"2-stars",type:"radio"}),Object(Te.jsx)("label",{htmlFor:"2-stars",className:"reviews__rating-label form__rating-label",title:"badly",children:Object(Te.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Te.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(Te.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"1",id:"1-star",type:"radio"}),Object(Te.jsx)("label",{htmlFor:"1-star",className:"reviews__rating-label form__rating-label",title:"terribly",children:Object(Te.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Te.jsx)("use",{xlinkHref:"#icon-star"})})})]}),Object(Te.jsx)("textarea",{onChange:m,ref:u,value:l.review,className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",maxLength:"300",required:!0}),Object(Te.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(Te.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(Te.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(Te.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(Te.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:i||!(l.review.length>=50&&l.rating),children:"Submit"})]})]})};var Ua=Je((function(e){var a=e.selectedOffer,t=e.reviews,r=e.authorizationStatus,s=e.offers,i=a.title,c=a.rating,n=a.isPremium,l=a.isFavorite,o=a.type,d=a.bedrooms,j=a.maxAdults,u=a.price,_=a.goods,b=a.host,p=a.images,h=a.city,O=a.id,f=b.avatarUrl;return Object(Te.jsxs)("section",{className:"property",children:[Object(Te.jsx)("div",{className:"property__gallery-container container",children:Object(Te.jsx)(Fa,{images:p})}),Object(Te.jsx)("div",{className:"property__container container",children:Object(Te.jsxs)("div",{className:"property__wrapper",children:[n?Object(Te.jsx)("div",{className:"property__mark",children:Object(Te.jsx)("span",{children:"Premium"})}):"",Object(Te.jsxs)("div",{className:"property__name-wrapper",children:[Object(Te.jsx)("h1",{className:"property__name",children:i}),Object(Te.jsx)(Fe,{isFavorite:l,id:O,buttonFavoriteStyle:E.large})]}),Object(Te.jsxs)("div",{className:"property__rating rating",children:[Object(Te.jsx)("div",{className:"property__stars rating__stars",children:Object(Te.jsx)(Le,{rating:c})}),Object(Te.jsx)("span",{className:"property__rating-value rating__value",children:c})]}),Object(Te.jsxs)("ul",{className:"property__features",children:[Object(Te.jsx)("li",{className:"property__feature property__feature--entire",children:o}),Object(Te.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[d," Bedrooms"]}),Object(Te.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",j," adults"]})]}),Object(Te.jsxs)("div",{className:"property__price",children:[Object(Te.jsxs)("b",{className:"property__price-value",children:["\u20ac",u]}),Object(Te.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(Te.jsxs)("div",{className:"property__inside",children:[Object(Te.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(Te.jsx)("ul",{className:"property__inside-list",children:_.map((function(e){return Object(Te.jsx)("li",{className:"property__inside-item",children:e},e)}))})]}),Object(Te.jsxs)("div",{className:"property__host",children:[Object(Te.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(Te.jsxs)("div",{className:"property__host-user user",children:[Object(Te.jsx)("div",{className:b.isPro?"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper":"property__avatar-wrapper user__avatar-wrapper",children:Object(Te.jsx)("img",{className:"property__avatar user__avatar",src:f,width:"74",height:"74",alt:"Host avatar"})}),Object(Te.jsx)("span",{className:"property__user-name",children:b.name}),b.isPro?Object(Te.jsx)("span",{className:"property__user-status",children:"Pro"}):""]}),Object(Te.jsxs)("div",{className:"property__description",children:[Object(Te.jsx)("p",{className:"property__text",children:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam. The building is green and from 18th century."}),Object(Te.jsx)("p",{className:"property__text",children:"An independent House, strategically located between Rembrand Square and National Opera, but where the bustle of the city comes to rest in this alley flowery and colorful."})]})]}),Object(Te.jsxs)("section",{className:"property__reviews reviews",children:[Object(Te.jsx)(Ma,{reviews:t}),r===m?Object(Te.jsx)(Ia,{id:O}):""]})]})}),Object(Te.jsx)("section",{className:"property__map map",children:Object(Te.jsx)(Xe,{city:h,offers:[].concat(Object(xa.a)(s),[a]),activeOffer:a.id})})]})}));var Ha=function(e){var a=e.offerId,t=Object(T.c)(ua),r=Object(T.c)(ja),i=Object(T.c)(ma),c=Object(T.c)(oa),n=Object(T.c)(da),l=Object(T.c)(qe),o=Object(T.c)(Pa),d=Object(T.c)(_a),j=Object(T.b)(),m=function(e){j(be(e))},_=function(e){j(function(e){return function(a,t,r){return r.get(p+e).then((function(e){var t=e.data;return a(ee(Object.assign({},ue(t))))})).catch((function(){return a(ce(u))}))}}(e))},b=function(e){j(function(e){return function(a,t,r){return r.get(p+e+h).then((function(e){var t=e.data;return a(ae(t.map((function(e){return ue(e)}))))}))}}(e))};return Object(s.useEffect)((function(){_(a),m(a),b(a)}),[c,a]),Object(s.useEffect)((function(){m(a)}),[o]),Object(Te.jsxs)("div",{className:"page",children:[Object(Te.jsx)(na,{}),Object(Te.jsxs)("main",{className:"page__main page__main--property",children:[Object(Te.jsx)(Ua,{isDataLoaded:n,selectedOffer:i,reviews:t,offers:r,authorizationStatus:l,activeOffer:d}),Object(Te.jsx)("div",{className:"container",children:Object(Te.jsx)(Ea,{offers:r})})]})]})};var Ga=function(){return Object(Te.jsxs)("div",{className:"page page--gray page--main",children:[Object(Te.jsx)("header",{className:"header",children:Object(Te.jsx)("div",{className:"container",children:Object(Te.jsxs)("div",{className:"header__wrapper",children:[Object(Te.jsx)("div",{className:"header__left",children:Object(Te.jsx)(ca,{})}),Object(Te.jsx)("nav",{className:"header__nav",children:Object(Te.jsxs)("ul",{className:"header__nav-list",children:[Object(Te.jsx)("li",{className:"header__nav-item user",children:Object(Te.jsxs)("a",{className:"header__nav-link header__nav-link--profile",href:"#",children:[Object(Te.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Te.jsx)("span",{className:"header__user-name user__name",children:"Oliver.conner@gmail.com"})]})}),Object(Te.jsx)("li",{className:"header__nav-item",children:Object(Te.jsx)("a",{className:"header__nav-link",href:"#",children:Object(Te.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})})]})})}),Object(Te.jsxs)("main",{className:"page__main page__main--index page__main--index-empty",children:[Object(Te.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(Te.jsx)("div",{className:"tabs",children:Object(Te.jsx)("section",{className:"locations container",children:Object(Te.jsxs)("ul",{className:"locations__list tabs__list",children:[Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item",href:"#",children:Object(Te.jsx)("span",{children:"Paris"})})}),Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item",href:"#",children:Object(Te.jsx)("span",{children:"Cologne"})})}),Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item",href:"#",children:Object(Te.jsx)("span",{children:"Brussels"})})}),Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item",children:Object(Te.jsx)("span",{children:"Amsterdam"})})}),Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item",href:"#",children:Object(Te.jsx)("span",{children:"Hamburg"})})}),Object(Te.jsx)("li",{className:"locations__item",children:Object(Te.jsx)("a",{className:"locations__item-link tabs__item tabs__item--active",href:"#",children:Object(Te.jsx)("span",{children:"Dusseldorf"})})})]})})}),Object(Te.jsx)("div",{className:"cities",children:Object(Te.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(Te.jsx)("section",{className:"cities__no-places",children:Object(Te.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(Te.jsx)("b",{className:"cities__status",children:"Page not found"}),Object(Te.jsx)("p",{className:"cities__status-description",children:"invalid addrece"})]})}),Object(Te.jsx)("div",{className:"cities__right-section"})]})})]})]})};var Ba=function(e){var a=e.render,t=e.path,r=e.exact,s=e.status,i=void 0===s?m:s,c=e.redirect,n=void 0===c?o:c,l=Object(T.c)(qe);return l===b?Object(Te.jsx)(Be,{}):Object(Te.jsx)(ze.b,{path:t,exact:r,render:function(e){return l===i?a(e):Object(Te.jsx)(ze.a,{to:n})}})};var Wa,Ja=function(){return Object(Te.jsxs)(ze.d,{children:[Object(Te.jsx)(ze.b,{exact:!0,path:l,children:Object(Te.jsx)(va,{cityList:q})}),Object(Te.jsx)(Ba,{exact:!0,path:d,render:function(){return Object(Te.jsx)(ka,{})}}),Object(Te.jsx)(Ba,{exact:!0,status:_,path:o,redirect:l,render:function(){return Object(Te.jsx)(Ra,{})}}),Object(Te.jsx)(ze.b,{exact:!0,path:j,render:function(e){var a=e.match.params.id;return Object(Te.jsx)(Ha,{offerId:a,city:q[0]})}}),Object(Te.jsx)(ze.b,{children:Object(Te.jsx)(Ga,{})})]})},Va=t(38),Ya=t.n(Va),Ka=401,$a=null!==(Wa=localStorage.getItem("token"))&&void 0!==Wa?Wa:"",Qa=t(9),Xa=Object(Qa.a)(),Za=function(e){return function(e){return function(a){return a.type===B&&Xa.push(a.payload),e(a)}}},et=function(e){var a=Ya.a.create({baseURL:"https://7.react.pages.academy/six-cities",timeout:5e3,headers:{"x-token":$a}});return a.interceptors.response.use((function(e){return e}),(function(a){throw a.response.status===Ka&&e(),a})),a.interceptors.request.use((function(e){var a;return e.headers={"x-token":null!==(a=localStorage.getItem("token"))&&void 0!==a?a:""},e})),a}((function(){return at.dispatch(re(_))})),at=Object(F.a)({reducer:Re,middleware:function(e){return e({thunk:{extraArgument:et}}).concat(Za)}});at.dispatch((function(e,a,t){return t.get(v).then((function(a){var t=a.data;e(re(m)),e(se(_e(t)))})).catch((function(){}))})),n.a.render(Object(Te.jsx)(i.a.StrictMode,{children:Object(Te.jsx)(T.a,{store:at,children:Object(Te.jsx)(De.a,{history:Xa,children:Object(Te.jsx)(Ja,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.072ae391.chunk.js.map